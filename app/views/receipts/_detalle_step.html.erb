  <table class="datos">
  <tr>
    <td>Acuerdo de Pago: &nbsp;</td>
    <td><%= f.text_field :payment_agreement_name, :value=> @payment_agreement, :readonly => true, :size => "30" %>
    <%= f.hidden_field :payment_agreement_id, :value=> @receipt.payment_agreement_id %></td>
    <th rowspan=20 width=30></th>
    <td>Total a Pagar: &nbsp;</td>
    <td class="ro"><div class="sh"><%= number_to_currency(@total_rp, :precision => 0, :delimiter => ".") %>
    <%= f.hidden_field :total_pay, :value=> @total_rp %></div></td>
  </tr>
  <tr>
    <td width="115">Fecha de Pago:</td><td><%= f.date_select :date_r, :order => [:day, :month, :year] %></td>
  </tr>
  <tr>
    <td>Preparado por:</td>
    <td><div class="n"><%= f.text_field :user_name, :size => "30", :value => current_user.name, :readonly => true %></div></td>
    <td>Teléfono: </td>
    <td><div class="n"><%= f.text_field :telephone_user, :size => "12" , :value => current_user.telephone, :readonly => true %></div></td>
  </tr>
  </table>

<!-- inicio DATOS DE CONTACTO -->
<!-- Solo para Tickets sin Detalle, Acuerdos de Pago != 1,2,5,6 -->
<% if (@receipt.payment_agreement_id!=1 and @receipt.payment_agreement_id!=2 and @receipt.payment_agreement_id!=5 and @receipt.payment_agreement_id!=6) %>
  <div class="subtit">
    Datos de Contacto: 
  </div>
  <table class="datos">
  <tr>
    <td width="85">Nombre: </td><td><%= f.text_field :cont_name, :size => "37" %></td>
    <th rowspan=20 width=16></th>
    <td width="70">Rut:</td><td><%= f.text_field :cont_rut, :size => "7" %> - <%= f.text_field :cont_digit, :size => "1" %></td>
  </tr>
  <tr>
    <td>Calle:</td><td><%= f.text_field :cont_calle, :size => "37" %></td>
    <td>N° </td><td><%= f.text_field :cont_num, :size => "12" %></td>
  </tr>
  <tr>
    <td>Comuna: </td><td><%= f.collection_select :comuna_id, Comuna.where('state = true').order('name ASC'), :id, :name, options ={:prompt => "- Seleccione -"} %></td>
    <td>N° Depto.:</td><td><%= f.text_field :cont_depto, :size => "12" %></td>
  </tr>
  <tr>
    <td>Referencias:</td><td colspan=4><%= f.text_field :cont_ref, :size => "67" %></td>
  </tr>
  <tr>
    <td>Horario: </td><td><%= f.text_field :cont_hr, :size => "37" %></td>
    <td>Teléfono 1: </td><td><%= f.text_field :cont_telf1, :size => "12" %></td>
  </tr>
  <tr>
    <td>Teléfono 2: </td><td><%= f.text_field :cont_telf2, :size => "12" %></td>
    <td>Teléfono 3: </td><td><%= f.text_field :cont_telf3, :size => "12" %></td>
  </tr>
  </table>
<% end %>
<!-- fin DATOS DE CONTACTO -->

<!-- No para Acuerdo Pago: con gestion en terreno -->
<% if (@receipt.payment_agreement_id!=3 and @receipt.payment_agreement_id!=4) %>
  <div class="subtit">
    Detalle del Pago:
  </div>
    <table class="datos">
    <tr>
      <th width="120">Forma de Pago</th>
      <th width="245">Emisor</th>
      <th width="118">N° Documento</th>
      <th>Monto</th>
    </tr>

    <% f.fields_for :payment_details do |builder| %>  
      <tr>
        <td><%= builder.collection_select :payment_form, PaymentForm.where('state = true').order('name ASC'), :name, :name, options ={:prompt => "- Seleccione -"} %></td>
        <td><%= builder.collection_select :emitter, Emitter.where('state = true').order('name ASC'), :name, :name, options ={:prompt => "- Seleccione -"} %></td>
        <td><%= builder.text_field :doc_num, :size => "16" %></td>
        <td><%= builder.text_field :amount, :size => "8" %></td>
      </tr>
    <% end %>  
    </table>
<% end %>

